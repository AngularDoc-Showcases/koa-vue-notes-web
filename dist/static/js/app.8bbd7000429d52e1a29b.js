webpackJsonp([9],{118:function(e,t){},119:function(e,t){},124:function(e,t,n){function o(e){n(119)}var s=n(27)(n(78),n(126),o,"data-v-59aa962b",null);e.exports=s.exports},125:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("navbar"),e._v(" "),n("router-view")],1)},staticRenderFns:[]}},126:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel"},[n("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"home"}}},[e._v("Home")]),e._v(" "),e.user?e._e():n("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"signup"}}},[e._v("Signup")]),e._v(" "),e.user?e._e():n("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"login"}}},[e._v("Login")]),e._v(" "),e.user?e._e():n("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"forgot"}}},[e._v("Forgot")]),e._v(" "),e.user?n("span",[e._v("|")]):e._e(),e._v(" "),e.user?n("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"account"}}},[e._v("Account")]):e._e(),e._v(" "),e.user?n("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:void(0)"},on:{click:e.logout}},[e._v("Logout")]):e._e()],1)},staticRenderFns:[]}},49:function(e,t){},50:function(e,t,n){"use strict";var o=n(16),s=n(127);o.a.use(s.a);var r=function(e){return n.e(6).then(function(){var t=[n(134)];e.apply(null,t)}.bind(this)).catch(n.oe)},a=function(e){return n.e(3).then(function(){var t=[n(137)];e.apply(null,t)}.bind(this)).catch(n.oe)},u=function(e){return n.e(0).then(function(){var t=[n(140)];e.apply(null,t)}.bind(this)).catch(n.oe)},c=function(e){return n.e(2).then(function(){var t=[n(138)];e.apply(null,t)}.bind(this)).catch(n.oe)},i=function(e){return n.e(4).then(function(){var t=[n(136)];e.apply(null,t)}.bind(this)).catch(n.oe)},l=function(e){return n.e(1).then(function(){var t=[n(139)];e.apply(null,t)}.bind(this)).catch(n.oe)},p=function(e){return n.e(7).then(function(){var t=[n(133)];e.apply(null,t)}.bind(this)).catch(n.oe)},m=function(e){return n.e(5).then(function(){var t=[n(135)];e.apply(null,t)}.bind(this)).catch(n.oe)};o.a.component("navbar",n(124));var f=new s.a({mode:"history",routes:[{path:"*",component:m,name:"notFound"},{path:"/",component:r,name:"home"},{path:"/user/login",component:a,name:"login"},{path:"/user/signup",component:u,name:"signup"},{path:"/user/logout",component:c,name:"logout"},{path:"/user/forgot",component:i,name:"forgot"},{path:"/user/reset",component:l,name:"reset"},{path:"/account",component:p,name:"account",meta:{requiresAuth:!0}}],scrollBehavior:function(e,t,n){return n||{x:0,y:0}}});f.beforeEach(function(e,t,n){f.app.$options.store.getters.accessToken&&f.app.$options.store.dispatch("setUserAndTokens",{accessToken:f.app.$options.store.getters.accessToken,refreshToken:f.app.$options.store.getters.refreshToken}),e.meta.requiresAuth&&!f.app.$options.store.state.user&&n({name:"home"}),n()}),t.a=f},51:function(e,t,n){"use strict";var o=n(81),s=n.n(o),r=n(16),a=n(9),u=n(59),c=n.n(u),i=n(122),l=n.n(i);r.a.use(a.c),c.a.defaults.baseURL="https://koa-vue-notes-api.innermonkdesign.com";var p=new a.c.Store({state:{user:null},mutations:{SET_USER:function(e,t){e.user=t},STORE_ACCESS_TOKEN:function(e,t){localStorage.setItem("accessToken",t)},STORE_REFRESH_TOKEN:function(e,t){localStorage.setItem("refreshToken",t)},LOGOUT_USER:function(e){e.user=null,localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},getters:{user:function(e){return e.user},accessToken:function(e){return null===localStorage.getItem("accessToken")?null:localStorage.getItem("accessToken")},refreshToken:function(e){return null===localStorage.getItem("refreshToken")?null:localStorage.getItem("refreshToken")}},actions:{setUserAndTokens:function(e,t){var n=e.commit;n("SET_USER",l()(t.accessToken).data[0]),n("STORE_ACCESS_TOKEN",t.accessToken),n("STORE_REFRESH_TOKEN",t.refreshToken)},userLogin:function(e,t){e.commit;return new s.a(function(e,n){c.a.post("/api/v1/user/authenticate",{username:t.username,password:t.password}).then(function(t){return p.dispatch("setUserAndTokens",{accessToken:t.data.accessToken,refreshToken:t.data.refreshToken}),r.a.toasted.success("Successfully logged in."),e()}).catch(function(e){return r.a.toasted.error("Hmm, those details don't seem right."),n()})})},userLogout:function(e,t){(0,e.commit)("LOGOUT_USER"),t.push({name:"home"})},userSignup:function(e,t){e.commit;return new s.a(function(e,n){c.a.post("/api/v1/user/signup",{firstName:t.firstName,lastName:t.lastName,username:t.username,email:t.email,password:t.password}).then(function(t){return r.a.toasted.success("Successfully signed up. Please login."),e()}).catch(function(e){return r.a.toasted.error("Hmm, something you entered doesn't seem right."),n()})})},userForgot:function(e,t){e.commit;return new s.a(function(e,n){c.a.post("/api/v1/user/forgot",{email:t.email,url:"https://koa-vue-notes-web.innermonkdesign.com/user/reset",type:"web"}).then(function(t){r.a.toasted.success("Please check your email."),e()}).catch(function(t){r.a.toasted.success("Please check your email."),e()})})},userReset:function(e,t){e.commit;return new s.a(function(e,n){console.log("here"),c.a.post("/api/v1/user/resetPassword",{password:t.password,passwordResetToken:t.passwordResetToken,email:t.email}).then(function(t){return r.a.toasted.success("Successfully reset password. Please login."),e()}).catch(function(e){return console.log(e),r.a.toasted.error("Your reset link has expired or is incorrect. Please reset your password again."),n()})})}}});t.a=p},53:function(e,t){},55:function(e,t,n){function o(e){n(118)}var s=n(27)(n(77),n(125),o,null,null);e.exports=s.exports},77:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},78:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),s=n.n(o),r=n(9);t.default={name:"navbar",methods:{logout:function(){this.$store.dispatch("userLogout",this.$router)}},computed:s()({},n.i(r.b)(["user"]))}},79:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),s=n.n(o),r=n(16),a=n(55),u=n.n(a),c=n(50),i=n(51),l=n(9),p=n(57),m=n.n(p),f=n(56),h=n.n(f),d=n(49),g=(n.n(d),n(54)),v=n.n(g),_=n(53);n.n(_);r.a.use(m.a),r.a.use(h.a,{theme:"bubble",position:"top-right",duration:2300}),window.jQuery=window.$=v.a,window.Tether={},n(52),r.a.config.productionTip=!1,new r.a({el:"#app",store:i.a,router:c.a,template:"<App/>",components:{App:u.a},computed:s()({},n.i(l.a)(["user"])),mounted:function(){}})}},[79]);
//# sourceMappingURL=app.8bbd7000429d52e1a29b.js.map